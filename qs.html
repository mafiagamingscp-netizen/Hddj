<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© DARKSHELL | Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯ Ø®Ù„ÙŠÙ„</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main: #00ff00; --bg: #0a0a0a; --card: #151515; }
        body { background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .card { background: var(--card); border: 1px solid #333; padding: 20px; border-radius: 12px; }
        h2 { color: var(--main); border-bottom: 1px solid var(--main); padding-bottom: 10px; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; background: #000; border: 1px solid #444; color: #fff; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: var(--main); border: none; font-weight: bold; cursor: pointer; border-radius: 5px; margin-top: 5px; }
        .user-row { background: #000; padding: 10px; margin-bottom: 8px; border-radius: 8px; border-right: 5px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .verified-badge { color: #3897f0; margin-right: 5px; }
    </style>
</head>
<body>

<h1>ğŸ’€ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø§Ù„Ù…Ø·ÙˆØ± Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯ Ø®Ù„ÙŠÙ„</h1>

<div class="grid">
    <div class="card">
        <h2>ğŸ“¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
        <div id="requests-list">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <div class="card">
        <h2>ğŸ‘¤ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨</h2>
        <input type="text" id="target-id" placeholder="Ø£Ø¯Ø®Ù„ ID Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="number" id="coins-amount" placeholder="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª (+/-)">
        <button onclick="updateCoins()">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ ğŸ’°</button>
        <div style="display:flex; gap:10px; margin-top:10px;">
            <button onclick="verifyUser(true)" style="background: #3897f0;">ØªÙˆØ«ÙŠÙ‚ <i class="fa-solid fa-circle-check"></i></button>
            <button onclick="verifyUser(false)" style="background: #555;">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ«ÙŠÙ‚</button>
        </div>
        <button onclick="banUser(true)" style="background: red; color: white;">Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ ğŸš«</button>
    </div>

    <div class="card">
        <h2>ğŸ“¢ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø« Ù„Ù„Ø¬Ù…ÙŠØ¹</h2>
        <textarea id="global-msg" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§..."></textarea>
        <input type="text" id="global-link" placeholder="Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
        <button onclick="sendGlobalAnnouncement()" style="background: #fff; color: #000;">Ø¥Ø±Ø³Ø§Ù„ ÙÙˆØ±Ø§Ù‹ ğŸš€</button>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDnojL76ZhOaeVg5-0O5WdBwMUtAjfrJKU",
        authDomain: "chat-43dea.firebaseapp.com",
        databaseURL: "https://chat-43dea-default-rtdb.firebaseio.com",
        projectId: "chat-43dea",
        storageBucket: "chat-43dea.firebasestorage.app",
        messagingSenderId: "827475356002",
        appId: "1:827475356002:web:ffdb5140d02ab1e237e43b"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref('users').on('value', (snap) => {
        const div = document.getElementById('requests-list');
        div.innerHTML = "";
        snap.forEach(child => {
            const user = child.val();
            const id = child.key;
            let statusText = user.status === 'active' ? '<span style="color:#0f0">Ù†Ø´Ø·</span>' : '<span style="color:orange">Ù…Ø¹Ù„Ù‚</span>';
            let vBadge = user.verified ? '<i class="fa-solid fa-circle-check" style="color:#3897f0; margin-right:5px;"></i>' : '';
            
            div.innerHTML += `
                <div class="user-row">
                    <div>
                        <b>${user.username}</b> ${vBadge} <small>(${id})</small><br>
                        ${statusText}
                    </div>
                    ${user.status !== 'active' ? `<button onclick="approveUser('${id}')" style="width:auto; padding:5px 10px; font-size:12px;">Ù‚Ø¨ÙˆÙ„</button>` : ''}
                </div>`;
        });
    });

    function approveUser(id) { db.ref('users/' + id).update({ status: 'active' }); }
    function updateCoins() {
        const id = document.getElementById('target-id').value;
        const amount = parseInt(document.getElementById('coins-amount').value);
        db.ref('users/' + id + '/coins').transaction(c => (c || 0) + amount);
        alert("ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„!");
    }
    function verifyUser(val) {
        const id = document.getElementById('target-id').value;
        db.ref('users/' + id).update({ verified: val });
        alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚ âœ”ï¸");
    }
    function banUser(val) {
        const id = document.getElementById('target-id').value;
        db.ref('users/' + id).update({ banned: val });
        alert("ØªÙ…!");
    }
    function sendGlobalAnnouncement() {
        const msg = document.getElementById('global-msg').value;
        const link = document.getElementById('global-link').value;
        if(!msg) return alert("Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©");
        db.ref('adminMessages/global').set({ message: msg, link: link, time: Date.now() })
        .then(() => { alert("ØªÙ… Ø§Ù„Ø¨Ø« Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"); document.getElementById('global-msg').value = ""; });
    }
</script>
</body>
</html>
